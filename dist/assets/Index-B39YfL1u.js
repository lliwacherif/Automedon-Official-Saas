import{d as f,$ as g,a0 as v,r as _,V as w,Y as b,U as k,e as l,o as r,g as e,i as o,j as t,l as C,C as d,v as L,f as T,F as V,n as j,E as S,h as N,a7 as B,a1 as E}from"./index-BlVnYu75.js";import{S as q}from"./search-BbYOXLbL.js";import{C as D}from"./car-BR9jPMjd.js";const F={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I={class:"sm:flex sm:items-center"},M={class:"sm:flex-auto"},U={class:"text-2xl font-semibold text-gray-900"},$={class:"mt-2 text-sm text-gray-700"},H={class:"mt-6 flex justify-between items-center"},P={class:"relative max-w-sm w-full"},R={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Y=["placeholder"],z={class:"mt-8 flex flex-col"},A={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},G={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},J={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},K={class:"min-w-full divide-y divide-gray-300"},O={class:"bg-gray-50"},Q={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},W={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},X={scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Z={class:"sr-only"},ee={class:"divide-y divide-gray-200 bg-white"},te={key:0},se={colspan:"3",class:"px-6 py-4 text-center text-sm text-gray-500"},oe={key:1},ae={colspan:"3",class:"px-6 py-4 text-center text-sm text-gray-500"},ie={class:"whitespace-nowrap py-4 pl-4 pr-3 sm:pl-6"},ne={class:"flex items-center"},le={class:"h-10 w-10 flex-shrink-0"},re=["src"],ce={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},de={class:"ml-4"},me={class:"font-medium text-gray-900"},_e={class:"text-gray-500"},he={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},pe={class:"inline-flex rounded-md bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10"},ue={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ve=f({__name:"Index",setup(xe){const{t:i}=g(),{tenantPath:x}=v(),m=_([]),h=_(!0),c=_("");w(async()=>{await y()});async function y(){try{const n=b();let a=k.from("cars").select("*");n.currentTenant?.id&&(a=a.eq("tenant_id",n.currentTenant.id));const{data:s,error:u}=await a.order("created_at",{ascending:!1});if(u)throw u;m.value=s||[]}catch(n){console.error("Error fetching cars:",n)}finally{h.value=!1}}const p=()=>{if(!c.value)return m.value;const n=c.value.toLowerCase();return m.value.filter(a=>a.make?.toLowerCase().includes(n)||a.model.toLowerCase().includes(n)||a.license_plate.toLowerCase().includes(n))};return(n,a)=>(r(),l("div",F,[e("div",I,[e("div",M,[e("h1",U,o(t(i)("admin.history.title")),1),e("p",$,o(t(i)("admin.history.subtitle")),1)])]),e("div",H,[e("div",P,[e("div",R,[d(t(q),{class:"h-5 w-5 text-gray-400"})]),C(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:t(i)("admin.history.search_placeholder")},null,8,Y),[[L,c.value]])])]),e("div",z,[e("div",A,[e("div",G,[e("div",J,[e("table",K,[e("thead",O,[e("tr",null,[e("th",Q,o(t(i)("admin.history.vehicle")),1),e("th",W,o(t(i)("admin.history.license_plate")),1),e("th",X,[e("span",Z,o(t(i)("common.actions")),1)])])]),e("tbody",ee,[h.value?(r(),l("tr",te,[e("td",se,o(t(i)("admin.history.loading")),1)])):p().length===0?(r(),l("tr",oe,[e("td",ae,o(t(i)("admin.history.no_cars")),1)])):T("",!0),(r(!0),l(V,null,j(p(),s=>(r(),l("tr",{key:s.id},[e("td",ie,[e("div",ne,[e("div",le,[s.image_url?(r(),l("img",{key:0,src:s.image_url,alt:"",class:"h-10 w-10 rounded-full object-cover"},null,8,re)):(r(),l("div",ce,[d(t(D),{class:"h-6 w-6 text-gray-500"})]))]),e("div",de,[e("div",me,o(s.make)+" "+o(s.model),1),e("div",_e,o(s.year),1)])])]),e("td",he,[e("span",pe,o(s.license_plate),1)]),e("td",ue,[d(t(E),{to:t(x)(`/admin/history/${s.id}`),class:"text-indigo-600 hover:text-indigo-900 flex items-center justify-end gap-1"},{default:S(()=>[d(t(B),{class:"w-4 h-4"}),N(" "+o(t(i)("admin.history.view_history")),1)]),_:1},8,["to"])])]))),128))])])])])])])]))}});export{ve as default};

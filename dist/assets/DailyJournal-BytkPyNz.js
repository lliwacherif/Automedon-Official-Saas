import{u as y}from"./useCars-CcI3-SoQ.js";import{d as h,$ as v,V as b,e as n,o as i,g as t,C as _,h as w,j as a,a4 as D,i as s,f as k,F as C,n as j,H as V}from"./index-BUxJS3To.js";import{a as u}from"./date-BpD5EXL9.js";import{L as T}from"./loader-circle-DdB38vDM.js";const F={class:"p-6"},L={class:"flex justify-between items-center mb-6"},N={class:"text-2xl font-bold text-gray-800 flex items-center"},S={key:0,class:"flex justify-center py-12"},B={key:1,class:"bg-white shadow-md rounded-lg overflow-hidden"},H={class:"overflow-x-auto"},I={class:"min-w-full divide-y divide-gray-200"},M={class:"bg-white divide-y divide-gray-200"},q={key:0},z={class:"px-6 py-4 whitespace-nowrap"},A={class:"text-sm font-medium text-gray-900"},E={class:"text-xs text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-bold"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-bold"},R={class:"px-6 py-4 whitespace-nowrap"},$={class:"text-sm font-medium text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"},K={class:"px-6 py-4 whitespace-nowrap text-sm"},Y=h({__name:"DailyJournal",setup(O){const{t:r}=v(),{cars:c,loading:f,fetchCars:m}=y();b(()=>{m()});function x(d){if(d.status!=="loue"||!d.active_reservation)return{text:r("admin.fleet.disponible"),class:"bg-green-100 text-green-800 border border-green-200 font-bold"};const o=new Date;o.setHours(0,0,0,0);const e=d.active_reservation;if(!e.end_date)return{text:"-",class:""};const p=new Date(e.end_date);p.setHours(0,0,0,0);const g=p.getTime()-o.getTime(),l=Math.ceil(g/(1e3*60*60*24));return l===1?{text:r("daily_journal.return_tomorrow"),class:"bg-red-100 text-red-800 border border-red-200 font-bold"}:l===2?{text:r("daily_journal.return_after_tomorrow"),class:"bg-orange-100 text-orange-800 border border-orange-200 font-bold"}:l>2?{text:new Date(e.end_date).toLocaleDateString("fr-FR"),class:"bg-green-100 text-green-800 border border-green-200 font-bold"}:l===0?{text:r("daily_journal.return_today"),class:"bg-red-600 text-white font-bold animate-pulse"}:{text:r("daily_journal.late"),class:"bg-red-800 text-white font-bold"}}return(d,o)=>(i(),n("div",F,[t("div",L,[t("h1",N,[_(a(D),{class:"w-8 h-8 mr-3 text-indigo-600"}),w(" "+s(a(r)("daily_journal.title")),1)])]),a(f)?(i(),n("div",S,[_(a(T),{class:"animate-spin h-8 w-8 text-indigo-600"})])):(i(),n("div",B,[t("div",H,[t("table",I,[o[1]||(o[1]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Voiture & Plaque "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date Début "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date Fin "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Client "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Contract ID "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ")])],-1)),t("tbody",M,[a(c).length===0?(i(),n("tr",q,[...o[0]||(o[0]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," Aucun véhicule dans la flotte. ",-1)])])):k("",!0),(i(!0),n(C,null,j(a(c),e=>(i(),n("tr",{key:e.id,class:"hover:bg-gray-50"},[t("td",z,[t("div",A,s(e.brand)+" "+s(e.model),1),t("div",E,s(e.plate_number),1)]),t("td",J,s((e.active_reservation||e.last_reservation)?.start_date?a(u)((e.active_reservation||e.last_reservation).start_date):"-"),1),t("td",P,s((e.active_reservation||e.last_reservation)?.end_date?a(u)((e.active_reservation||e.last_reservation).end_date):"-"),1),t("td",R,[t("div",$,s((e.active_reservation||e.last_reservation)?.client_name||"-"),1)]),t("td",G,s((e.active_reservation||e.last_reservation)?.contract_number||"-"),1),t("td",K,[t("span",{class:V([x(e).class,"px-2 py-1 inline-flex text-xs leading-5 rounded-full"])},s(x(e).text),3)])]))),128))])])])]))]))}});export{Y as default};

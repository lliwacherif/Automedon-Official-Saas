import{c as M,d as E,$ as H,a0 as N,r as b,V as S,e as a,o as i,g as t,C as l,i as s,j as e,E as k,a1 as C,l as F,v as z,m as U,f as g,F as _,n as v,h as j,H as D,k as A,G as q}from"./index-6E32DxFF.js";import{u as P}from"./useReservations-D-TYcptp.js";import{u as G}from"./useReservationDocuments-BUXjQ0SO.js";import{a as x}from"./date-BpD5EXL9.js";import{C as W}from"./car-HXnuAarX.js";import{F as J}from"./file-text-D6FavWBd.js";import{S as K}from"./square-pen-Dz5WJ_Ku.js";import{T as O}from"./trash-2-CNjQKPy3.js";import"./useFileUpload-CazNZ32J.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=M("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=M("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=M("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Z={class:"p-6"},tt={class:"flex justify-between items-center mb-6"},et={class:"text-2xl font-semibold text-gray-900"},st={class:"bg-white p-4 rounded-lg shadow mb-6"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nt={class:"block text-sm font-medium text-gray-700 mb-1"},at=["placeholder"],it={class:"block text-sm font-medium text-gray-700 mb-1"},dt={value:"all"},rt={value:"pending"},lt={value:"confirmed"},ct={value:"active"},ut={value:"completed"},xt={value:"cancelled"},_t={key:0,class:"text-center py-12"},mt={class:"text-gray-500"},pt={key:1},ht={class:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg"},gt={class:"min-w-full divide-y divide-gray-200"},vt={class:"bg-gray-50"},yt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ft={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},wt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},bt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},kt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ct={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},jt={scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},Dt={class:"bg-white divide-y divide-gray-200"},Mt={key:0},Vt={colspan:"8",class:"px-6 py-4 text-center text-gray-500"},$t=["onClick"],Tt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-indigo-600"},Ft={class:"px-6 py-4 whitespace-nowrap"},It={class:"text-sm font-medium text-gray-900"},Lt={class:"text-sm text-gray-500"},Rt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"text-sm font-medium text-gray-900"},Et={class:"text-sm text-gray-500"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Nt={class:"text-xs text-gray-400"},St={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},zt={class:"px-6 py-4 whitespace-nowrap"},Ut={class:"px-6 py-4 whitespace-nowrap text-center"},At={class:"text-indigo-600 hover:text-indigo-900 flex items-center justify-center mx-auto"},qt=["onClick"],Pt={key:0},Gt={colspan:"8",class:"px-6 py-4 bg-gray-50"},Wt={class:"max-w-4xl"},Jt={key:0,class:"space-y-2"},Kt={class:"flex items-center space-x-3"},Ot={class:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-indigo-100 rounded-lg text-indigo-600"},Qt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Xt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Yt={class:"text-sm font-medium text-gray-900"},Zt={class:"text-xs text-gray-500"},te={class:"flex space-x-2"},ee=["href"],se=["href"],oe={key:1,class:"text-sm text-gray-500 italic py-2"},ne={class:"md:hidden space-y-4"},ae={key:0,class:"text-center py-12 bg-white rounded-lg shadow"},ie={class:"text-gray-500"},de={class:"flex justify-between items-start"},re={class:"text-sm font-bold text-indigo-600"},le={class:"text-xs text-gray-500 mt-1"},ce={class:"flex items-center space-x-3 pt-2 border-t border-gray-100"},ue={class:"text-sm font-medium text-gray-900"},xe={class:"text-xs text-gray-500"},_e={class:"flex items-center space-x-3"},me={class:"text-sm font-medium text-gray-900"},pe={class:"text-xs text-gray-500"},he={class:"flex items-center space-x-3"},ge={class:"text-sm text-gray-600"},ve={class:"text-xs text-gray-400"},ye={class:"flex justify-between items-center pt-2 border-t border-gray-100"},fe={class:"text-sm font-bold text-gray-900"},we={class:"flex space-x-2"},be=["onClick"],ke=["onClick"],Ce={key:0,class:"mt-3 pt-3 border-t border-gray-100 bg-gray-50 rounded-md p-3"},je={key:0,class:"space-y-2"},De={class:"text-xs font-medium text-gray-700 truncate max-w-[150px]"},Me={class:"flex space-x-1"},Ve=["href"],$e=["href"],Te={key:1,class:"text-xs text-gray-500 italic text-center py-1"},Ue=E({__name:"Index",setup(Fe){const{t:n}=H(),{reservations:m,loading:I,fetchReservations:L,deleteReservation:R}=P(),{documents:p,fetchDocuments:B}=G(),{tenantPath:y}=N(),f=b(""),w=b("all"),u=b(null);S(()=>{h()});async function h(){await L(1,f.value,w.value)}function V(c){switch(c){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}async function $(c,d){confirm(n("admin.reservations.confirm_delete",{number:d}))&&(await R(c),h())}async function T(c){u.value===c?u.value=null:(u.value=c,await B(c))}return(c,d)=>(i(),a("div",Z,[t("div",tt,[t("h1",et,s(e(n)("admin.reservations.title")),1),l(e(C),{to:e(y)("/admin/reservations/new"),class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},{default:k(()=>[j(s(e(n)("admin.reservations.new_reservation")),1)]),_:1},8,["to"])]),t("div",st,[t("div",ot,[t("div",null,[t("label",nt,s(e(n)("admin.reservations.search")),1),F(t("input",{"onUpdate:modelValue":d[0]||(d[0]=o=>f.value=o),onInput:h,type:"text",placeholder:e(n)("admin.reservations.search_placeholder"),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,40,at),[[z,f.value]])]),t("div",null,[t("label",it,s(e(n)("admin.reservations.status_filter")),1),F(t("select",{"onUpdate:modelValue":d[1]||(d[1]=o=>w.value=o),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t("option",dt,s(e(n)("admin.reservations.all_statuses")),1),t("option",rt,s(e(n)("admin.reservations.status_pending")),1),t("option",lt,s(e(n)("admin.reservations.status_confirmed")),1),t("option",ct,s(e(n)("admin.reservations.status_active")),1),t("option",ut,s(e(n)("admin.reservations.status_completed")),1),t("option",xt,s(e(n)("admin.reservations.status_cancelled")),1)],544),[[U,w.value]])])])]),e(I)?(i(),a("div",_t,[t("p",mt,s(e(n)("common.loading"))+"...",1)])):(i(),a("div",pt,[t("div",ht,[t("table",gt,[t("thead",vt,[t("tr",null,[t("th",yt,s(e(n)("admin.reservations.reservation_number")),1),t("th",ft,s(e(n)("admin.reservations.client")),1),t("th",wt,s(e(n)("admin.reservations.car")),1),t("th",bt,s(e(n)("admin.reservations.dates")),1),t("th",kt,s(e(n)("admin.reservations.total")),1),t("th",Ct,s(e(n)("common.status")),1),d[3]||(d[3]=t("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Documents ",-1)),t("th",jt,s(e(n)("common.actions")),1)])]),t("tbody",Dt,[e(m).length===0?(i(),a("tr",Mt,[t("td",Vt,s(e(n)("admin.reservations.no_reservations")),1)])):g("",!0),(i(!0),a(_,null,v(e(m),o=>(i(),a(_,{key:o.id},[t("tr",{class:"hover:bg-gray-50 cursor-pointer",onClick:r=>T(o.id)},[t("td",Tt,s(o.reservation_number),1),t("td",Ft,[t("div",It,s(o.client_name),1),t("div",Lt,s(o.client_cin),1)]),t("td",Rt,[t("div",Bt,s(o.car?.brand)+" "+s(o.car?.model),1),t("div",Et,s(o.car?.plate_number),1)]),t("td",Ht,[t("div",null,s(e(x)(o.start_date)),1),t("div",null,s(e(x)(o.end_date)),1),t("div",Nt,"("+s(o.duration_days)+" "+s(e(n)("admin.reservations.days"))+")",1)]),t("td",St," $"+s(o.total_price.toFixed(2)),1),t("td",zt,[t("span",{class:D([V(o.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},s(e(n)(`admin.reservations.status_${o.status}`)),3)]),t("td",Ut,[t("button",At,[(i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",class:D(["h-5 w-5",{"rotate-180":u.value===o.id}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...d[4]||(d[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]),t("td",{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",onClick:d[2]||(d[2]=A(()=>{},["stop"]))},[l(e(C),{to:e(y)(`/admin/reservations/${o.id}`),class:"text-indigo-600 hover:text-indigo-900"},{default:k(()=>[j(s(e(n)("common.edit")),1)]),_:1},8,["to"]),t("button",{onClick:r=>$(o.id,o.reservation_number),class:"text-red-600 hover:text-red-900"},s(e(n)("common.delete")),9,qt)])],8,$t),u.value===o.id?(i(),a("tr",Pt,[t("td",Gt,[t("div",Wt,[d[7]||(d[7]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Documents du Contrat",-1)),e(p).length>0?(i(),a("div",Jt,[(i(!0),a(_,null,v(e(p),r=>(i(),a("div",{key:r.id,class:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200"},[t("div",Kt,[t("div",Ot,[r.file_name.toLowerCase().endsWith(".pdf")?(i(),a("svg",Qt,[...d[5]||(d[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])):(i(),a("svg",Xt,[...d[6]||(d[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t("div",null,[t("div",Yt,s(r.file_name),1),t("div",Zt,"Ajouté le "+s(e(x)(r.uploaded_at)),1)])]),t("div",te,[t("a",{href:r.file_url,target:"_blank",download:"",class:"px-3 py-1 text-xs bg-indigo-50 text-indigo-700 rounded-md hover:bg-indigo-100"}," Télécharger ",8,ee),t("a",{href:r.file_url,target:"_blank",class:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"}," Voir ",8,se)])]))),128))])):(i(),a("div",oe," Aucun document disponible. "))])])])):g("",!0)],64))),128))])])]),t("div",ne,[e(m).length===0?(i(),a("div",ae,[t("p",ie,s(e(n)("admin.reservations.no_reservations")),1)])):g("",!0),(i(!0),a(_,null,v(e(m),o=>(i(),a("div",{key:o.id,class:"bg-white rounded-lg shadow p-4 space-y-3"},[t("div",de,[t("div",null,[t("span",re,"#"+s(o.reservation_number),1),t("div",le,s(e(x)(o.created_at)),1)]),t("span",{class:D([V(o.status),"px-2 py-1 text-xs font-semibold rounded-full"])},s(e(n)(`admin.reservations.status_${o.status}`)),3)]),t("div",ce,[l(e(Y),{class:"h-4 w-4 text-gray-400"}),t("div",null,[t("div",ue,s(o.client_name),1),t("div",xe,s(o.client_phone),1)])]),t("div",_e,[l(e(W),{class:"h-4 w-4 text-gray-400"}),t("div",null,[t("div",me,s(o.car?.brand)+" "+s(o.car?.model),1),t("div",pe,s(o.car?.plate_number),1)])]),t("div",he,[l(e(q),{class:"h-4 w-4 text-gray-400"}),t("div",ge,[j(s(e(x)(o.start_date))+" - "+s(e(x)(o.end_date))+" ",1),t("span",ve,"("+s(o.duration_days)+"j)",1)])]),t("div",ye,[t("div",fe,s(o.total_price.toFixed(2))+" TND ",1),t("div",we,[t("button",{onClick:r=>T(o.id),class:"p-2 text-gray-400 hover:text-indigo-600 rounded-full hover:bg-gray-100"},[l(e(J),{class:"h-4 w-4"})],8,be),l(e(C),{to:e(y)(`/admin/reservations/${o.id}`),class:"p-2 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50"},{default:k(()=>[l(e(K),{class:"h-4 w-4"})]),_:1},8,["to"]),t("button",{onClick:r=>$(o.id,o.reservation_number),class:"p-2 text-red-600 hover:text-red-800 rounded-full hover:bg-red-50"},[l(e(O),{class:"h-4 w-4"})],8,ke)])]),u.value===o.id?(i(),a("div",Ce,[d[8]||(d[8]=t("h4",{class:"text-xs font-semibold text-gray-700 mb-2 uppercase tracking-wider"},"Documents",-1)),e(p).length>0?(i(),a("div",je,[(i(!0),a(_,null,v(e(p),r=>(i(),a("div",{key:r.id,class:"flex items-center justify-between bg-white p-2 rounded border border-gray-200"},[t("span",De,s(r.file_name),1),t("div",Me,[t("a",{href:r.file_url,target:"_blank",download:"",class:"p-1 text-indigo-600 hover:bg-indigo-50 rounded"},[l(e(Q),{class:"h-3 w-3"})],8,Ve),t("a",{href:r.file_url,target:"_blank",class:"p-1 text-gray-600 hover:bg-gray-50 rounded"},[l(e(X),{class:"h-3 w-3"})],8,$e)])]))),128))])):(i(),a("div",Te," Aucun document. "))])):g("",!0)]))),128))])]))]))}});export{Ue as default};

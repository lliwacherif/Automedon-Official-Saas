import{c as y,d as z,$ as B,a0 as E,r as k,V as N,e as a,o as i,g as t,C as l,i as s,j as e,E as C,a1 as M,l as H,v as S,m as q,f as g,F as _,n as v,h as j,H as D,k as U,G as A}from"./index-BgCL6C0w.js";import{u as P}from"./useReservations-vuFAFkz7.js";import{u as G}from"./useReservationDocuments-CoW0y4In.js";import{a as x}from"./date-BpD5EXL9.js";import{C as W}from"./car-DiCbWpPN.js";import{S as Z}from"./square-pen-C84BIWF1.js";import{T as J}from"./trash-2-DsTpwgfT.js";import"./useFileUpload-DHz28v0K.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=y("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=y("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=y("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=y("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Y={class:"p-6"},tt={class:"flex justify-between items-center mb-6"},et={class:"text-2xl font-semibold text-gray-900"},st={class:"bg-white p-4 rounded-lg shadow mb-6"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nt={class:"block text-sm font-medium text-gray-700 mb-1"},at=["placeholder"],it={class:"block text-sm font-medium text-gray-700 mb-1"},dt={value:"all"},rt={value:"pending"},lt={value:"confirmed"},ct={value:"active"},ut={value:"completed"},xt={value:"cancelled"},_t={key:0,class:"text-center py-12"},pt={class:"text-gray-500"},mt={key:1},ht={class:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg"},gt={class:"min-w-full divide-y divide-gray-200"},vt={class:"bg-gray-50"},yt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ft={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},bt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},wt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},kt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ct={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Mt={scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},jt={class:"bg-white divide-y divide-gray-200"},Dt={key:0},Vt={colspan:"8",class:"px-6 py-4 text-center text-gray-500"},Tt=["onClick"],$t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-indigo-600"},Ht={class:"px-6 py-4 whitespace-nowrap"},It={class:"text-sm font-medium text-gray-900"},Ft={class:"text-sm text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap"},Rt={class:"text-sm font-medium text-gray-900"},zt={class:"text-sm text-gray-500"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Et={class:"text-xs text-gray-400"},Nt={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap"},qt={class:"px-6 py-4 whitespace-nowrap text-center"},Ut={class:"text-indigo-600 hover:text-indigo-900 flex items-center justify-center mx-auto"},At=["onClick"],Pt={key:0},Gt={colspan:"8",class:"px-6 py-4 bg-gray-50"},Wt={class:"max-w-4xl"},Zt={key:0,class:"space-y-2"},Jt={class:"flex items-center space-x-3"},Kt={class:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-indigo-100 rounded-lg text-indigo-600"},Ot={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Qt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Xt={class:"text-sm font-medium text-gray-900"},Yt={class:"text-xs text-gray-500"},te={class:"flex space-x-2"},ee=["href"],se=["href"],oe={key:1,class:"text-sm text-gray-500 italic py-2"},ne={class:"md:hidden space-y-4"},ae={key:0,class:"text-center py-12 bg-white rounded-lg shadow"},ie={class:"text-gray-500"},de={class:"flex justify-between items-start"},re={class:"text-sm font-bold text-indigo-600"},le={class:"text-xs text-gray-500 mt-1"},ce={class:"flex items-center space-x-3 pt-2 border-t border-gray-100"},ue={class:"text-sm font-medium text-gray-900"},xe={class:"text-xs text-gray-500"},_e={class:"flex items-center space-x-3"},pe={class:"text-sm font-medium text-gray-900"},me={class:"text-xs text-gray-500"},he={class:"flex items-center space-x-3"},ge={class:"text-sm text-gray-600"},ve={class:"text-xs text-gray-400"},ye={class:"flex justify-between items-center pt-2 border-t border-gray-100"},fe={class:"text-sm font-bold text-gray-900"},be={class:"flex space-x-2"},we=["onClick"],ke=["onClick"],Ce={key:0,class:"mt-3 pt-3 border-t border-gray-100 bg-gray-50 rounded-md p-3"},Me={key:0,class:"space-y-2"},je={class:"text-xs font-medium text-gray-700 truncate max-w-[150px]"},De={class:"flex space-x-1"},Ve=["href"],Te=["href"],$e={key:1,class:"text-xs text-gray-500 italic text-center py-1"},Se=z({__name:"Index",setup(He){const{t:n}=B(),{reservations:p,loading:I,fetchReservations:F,deleteReservation:L}=P(),{documents:m,fetchDocuments:R}=G(),{tenantPath:f}=E(),b=k(""),w=k("all"),u=k(null);N(()=>{h()});async function h(){await F(1,b.value,w.value)}function V(c){switch(c){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}async function T(c,d){confirm(n("admin.reservations.confirm_delete",{number:d}))&&(await L(c),h())}async function $(c){u.value===c?u.value=null:(u.value=c,await R(c))}return(c,d)=>(i(),a("div",Y,[t("div",tt,[t("h1",et,s(e(n)("admin.reservations.title")),1),l(e(M),{to:e(f)("/admin/reservations/new"),class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},{default:C(()=>[j(s(e(n)("admin.reservations.new_reservation")),1)]),_:1},8,["to"])]),t("div",st,[t("div",ot,[t("div",null,[t("label",nt,s(e(n)("admin.reservations.search")),1),H(t("input",{"onUpdate:modelValue":d[0]||(d[0]=o=>b.value=o),onInput:h,type:"text",placeholder:e(n)("admin.reservations.search_placeholder"),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,40,at),[[S,b.value]])]),t("div",null,[t("label",it,s(e(n)("admin.reservations.status_filter")),1),H(t("select",{"onUpdate:modelValue":d[1]||(d[1]=o=>w.value=o),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t("option",dt,s(e(n)("admin.reservations.all_statuses")),1),t("option",rt,s(e(n)("admin.reservations.status_pending")),1),t("option",lt,s(e(n)("admin.reservations.status_confirmed")),1),t("option",ct,s(e(n)("admin.reservations.status_active")),1),t("option",ut,s(e(n)("admin.reservations.status_completed")),1),t("option",xt,s(e(n)("admin.reservations.status_cancelled")),1)],544),[[q,w.value]])])])]),e(I)?(i(),a("div",_t,[t("p",pt,s(e(n)("common.loading"))+"...",1)])):(i(),a("div",mt,[t("div",ht,[t("table",gt,[t("thead",vt,[t("tr",null,[t("th",yt,s(e(n)("admin.reservations.reservation_number")),1),t("th",ft,s(e(n)("admin.reservations.client")),1),t("th",bt,s(e(n)("admin.reservations.car")),1),t("th",wt,s(e(n)("admin.reservations.dates")),1),t("th",kt,s(e(n)("admin.reservations.total")),1),t("th",Ct,s(e(n)("common.status")),1),d[3]||(d[3]=t("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Documents ",-1)),t("th",Mt,s(e(n)("common.actions")),1)])]),t("tbody",jt,[e(p).length===0?(i(),a("tr",Dt,[t("td",Vt,s(e(n)("admin.reservations.no_reservations")),1)])):g("",!0),(i(!0),a(_,null,v(e(p),o=>(i(),a(_,{key:o.id},[t("tr",{class:"hover:bg-gray-50 cursor-pointer",onClick:r=>$(o.id)},[t("td",$t,s(o.reservation_number),1),t("td",Ht,[t("div",It,s(o.client_name),1),t("div",Ft,s(o.client_cin),1)]),t("td",Lt,[t("div",Rt,s(o.car?.brand)+" "+s(o.car?.model),1),t("div",zt,s(o.car?.plate_number),1)]),t("td",Bt,[t("div",null,s(e(x)(o.start_date)),1),t("div",null,s(e(x)(o.end_date)),1),t("div",Et,"("+s(o.duration_days)+" "+s(e(n)("admin.reservations.days"))+")",1)]),t("td",Nt," $"+s(o.total_price.toFixed(2)),1),t("td",St,[t("span",{class:D([V(o.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},s(e(n)(`admin.reservations.status_${o.status}`)),3)]),t("td",qt,[t("button",Ut,[(i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",class:D(["h-5 w-5",{"rotate-180":u.value===o.id}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...d[4]||(d[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]),t("td",{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",onClick:d[2]||(d[2]=U(()=>{},["stop"]))},[l(e(M),{to:e(f)(`/admin/reservations/${o.id}`),class:"text-indigo-600 hover:text-indigo-900"},{default:C(()=>[j(s(e(n)("common.edit")),1)]),_:1},8,["to"]),t("button",{onClick:r=>T(o.id,o.reservation_number),class:"text-red-600 hover:text-red-900"},s(e(n)("common.delete")),9,At)])],8,Tt),u.value===o.id?(i(),a("tr",Pt,[t("td",Gt,[t("div",Wt,[d[7]||(d[7]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Documents du Contrat",-1)),e(m).length>0?(i(),a("div",Zt,[(i(!0),a(_,null,v(e(m),r=>(i(),a("div",{key:r.id,class:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200"},[t("div",Jt,[t("div",Kt,[r.file_name.toLowerCase().endsWith(".pdf")?(i(),a("svg",Ot,[...d[5]||(d[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])):(i(),a("svg",Qt,[...d[6]||(d[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t("div",null,[t("div",Xt,s(r.file_name),1),t("div",Yt,"Ajouté le "+s(e(x)(r.uploaded_at)),1)])]),t("div",te,[t("a",{href:r.file_url,target:"_blank",download:"",class:"px-3 py-1 text-xs bg-indigo-50 text-indigo-700 rounded-md hover:bg-indigo-100"}," Télécharger ",8,ee),t("a",{href:r.file_url,target:"_blank",class:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"}," Voir ",8,se)])]))),128))])):(i(),a("div",oe," Aucun document disponible. "))])])])):g("",!0)],64))),128))])])]),t("div",ne,[e(p).length===0?(i(),a("div",ae,[t("p",ie,s(e(n)("admin.reservations.no_reservations")),1)])):g("",!0),(i(!0),a(_,null,v(e(p),o=>(i(),a("div",{key:o.id,class:"bg-white rounded-lg shadow p-4 space-y-3"},[t("div",de,[t("div",null,[t("span",re,"#"+s(o.reservation_number),1),t("div",le,s(e(x)(o.created_at)),1)]),t("span",{class:D([V(o.status),"px-2 py-1 text-xs font-semibold rounded-full"])},s(e(n)(`admin.reservations.status_${o.status}`)),3)]),t("div",ce,[l(e(X),{class:"h-4 w-4 text-gray-400"}),t("div",null,[t("div",ue,s(o.client_name),1),t("div",xe,s(o.client_phone),1)])]),t("div",_e,[l(e(W),{class:"h-4 w-4 text-gray-400"}),t("div",null,[t("div",pe,s(o.car?.brand)+" "+s(o.car?.model),1),t("div",me,s(o.car?.plate_number),1)])]),t("div",he,[l(e(A),{class:"h-4 w-4 text-gray-400"}),t("div",ge,[j(s(e(x)(o.start_date))+" - "+s(e(x)(o.end_date))+" ",1),t("span",ve,"("+s(o.duration_days)+"j)",1)])]),t("div",ye,[t("div",fe,s(o.total_price.toFixed(2))+" TND ",1),t("div",be,[t("button",{onClick:r=>$(o.id),class:"p-2 text-gray-400 hover:text-indigo-600 rounded-full hover:bg-gray-100"},[l(e(Q),{class:"h-4 w-4"})],8,we),l(e(M),{to:e(f)(`/admin/reservations/${o.id}`),class:"p-2 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50"},{default:C(()=>[l(e(Z),{class:"h-4 w-4"})]),_:1},8,["to"]),t("button",{onClick:r=>T(o.id,o.reservation_number),class:"p-2 text-red-600 hover:text-red-800 rounded-full hover:bg-red-50"},[l(e(J),{class:"h-4 w-4"})],8,ke)])]),u.value===o.id?(i(),a("div",Ce,[d[8]||(d[8]=t("h4",{class:"text-xs font-semibold text-gray-700 mb-2 uppercase tracking-wider"},"Documents",-1)),e(m).length>0?(i(),a("div",Me,[(i(!0),a(_,null,v(e(m),r=>(i(),a("div",{key:r.id,class:"flex items-center justify-between bg-white p-2 rounded border border-gray-200"},[t("span",je,s(r.file_name),1),t("div",De,[t("a",{href:r.file_url,target:"_blank",download:"",class:"p-1 text-indigo-600 hover:bg-indigo-50 rounded"},[l(e(K),{class:"h-3 w-3"})],8,Ve),t("a",{href:r.file_url,target:"_blank",class:"p-1 text-gray-600 hover:bg-gray-50 rounded"},[l(e(O),{class:"h-3 w-3"})],8,Te)])]))),128))])):(i(),a("div",$e," Aucun document. "))])):g("",!0)]))),128))])]))]))}});export{Se as default};

import{r as c,U as i}from"./index-BgCL6C0w.js";function h(){const s=c(!1),t=c(null);async function f(l,a="car-images",r=""){s.value=!0,t.value=null;try{const e=l.name.split(".").pop(),o=`${Date.now()}-${Math.random().toString(36).substring(2)}.${e}`,u=r?`${r}/${o}`:o,{data:m,error:n}=await i.storage.from(a).upload(u,l,{cacheControl:"3600",upsert:!1});if(n)throw console.error("Supabase Storage Upload Error (Detail):",JSON.stringify(n,null,2)),alert("Upload Error: "+(n.message||"Unknown error")),n;const{data:{publicUrl:g}}=i.storage.from(a).getPublicUrl(u);return g}catch(e){return t.value=e.message,console.error("Error uploading file:",e),null}finally{s.value=!1}}async function p(l,a="car-images"){try{const r=l.split(`/storage/v1/object/public/${a}/`);if(r.length<2)throw new Error("Invalid file URL");const e=r[1],{error:o}=await i.storage.from(a).remove([e]);if(o)throw o;return!0}catch(r){return t.value=r.message,console.error("Error deleting file:",r),!1}}return{uploading:s,uploadError:t,uploadFile:f,deleteFile:p}}export{h as u};

import{u as B}from"./useCars-DEHVUAbi.js";import{d as L,a0 as j,V as S,e as n,o as i,g as e,D as r,i as s,G as p,j as a,a1 as h,F as g,n as _,h as c,I as b}from"./index-C1y38dmy.js";import{S as T}from"./square-pen-DSzHzBpB.js";import{T as V}from"./trash-2-CyLtOc28.js";const D={class:"p-6"},q={class:"flex justify-between items-center mb-6"},A={class:"text-2xl font-semibold text-gray-900"},F={key:0,class:"text-center py-12"},I={key:1,class:"space-y-8"},N={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},P={class:"text-xl font-bold text-gray-900"},z={key:0,class:"px-6 py-8 text-center text-gray-500"},E={key:1},G={class:"hidden md:block overflow-x-auto"},M={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-gray-50"},H={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},J={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},K={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},O={class:"bg-white divide-y divide-gray-200"},Q={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"},W={class:"px-6 py-4 whitespace-nowrap"},X=["value","onChange","disabled"],Y={value:"disponible"},Z={value:"loue"},ee={value:"maintenance"},te={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},se=["onClick"],oe={class:"md:hidden p-4 space-y-4"},ne={class:"flex justify-between items-start mb-3"},ie={class:"text-sm font-bold text-gray-900"},ae={class:"text-xs text-gray-500 font-mono mt-1"},de=["value","onChange","disabled"],le={value:"disponible"},re={value:"loue"},ce={value:"maintenance"},ue={class:"flex justify-end space-x-3 pt-3 border-t border-gray-100"},me=["onClick"],xe=L({__name:"Index",setup(pe){const{carsByBrand:v,loading:w,fetchCars:k,deleteCar:$,updateCar:C}=B(),{tenantPath:u}=j();S(()=>{k()});async function f(o){confirm("Are you sure you want to delete this car?")&&await $(o)}async function x(o,d){await C(o,{status:d})}return(o,d)=>(i(),n("div",D,[e("div",q,[e("h1",A,s(o.$t("admin.fleet.title")),1),r(a(h),{to:a(u)("/admin/cars/create"),class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},{default:p(()=>[c(s(o.$t("admin.fleet.add_car")),1)]),_:1},8,["to"])]),a(w)?(i(),n("div",F,[...d[0]||(d[0]=[e("p",{class:"text-gray-500"},"Loading...",-1)])])):(i(),n("div",I,[(i(!0),n(g,null,_(a(v),(m,y)=>(i(),n("div",{key:y,class:"bg-white shadow rounded-lg overflow-hidden"},[e("div",N,[e("h2",P,s(y),1)]),m.length===0?(i(),n("div",z,s(o.$t("admin.fleet.no_cars")),1)):(i(),n("div",E,[e("div",G,[e("table",M,[e("thead",R,[e("tr",null,[e("th",H,s(o.$t("admin.fleet.model")),1),e("th",J,s(o.$t("admin.fleet.plate_number")),1),e("th",K,s(o.$t("admin.fleet.status")),1),d[1]||(d[1]=e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",O,[(i(!0),n(g,null,_(m,t=>(i(),n("tr",{key:t.id},[e("td",Q,s(t.model),1),e("td",U,s(t.plate_number),1),e("td",W,[e("select",{value:t.status,onChange:l=>x(t.id,l.target.value),disabled:t.status!=="maintenance",title:"Le statut ne peut être modifié manuellement que s'il est en maintenance.",class:b([{"bg-green-100 text-green-800":t.status==="disponible","bg-red-100 text-red-800":t.status==="loue","bg-yellow-100 text-yellow-800":t.status==="maintenance","opacity-50 cursor-not-allowed":t.status!=="maintenance"},"text-xs font-semibold rounded-md border-0 py-1 px-2 focus:ring-2 focus:ring-indigo-500"])},[e("option",Y,s(o.$t("admin.fleet.disponible")),1),e("option",Z,s(o.$t("admin.fleet.loue")),1),e("option",ee,s(o.$t("admin.fleet.maintenance")),1)],42,X)]),e("td",te,[r(a(h),{to:a(u)(`/admin/cars/${t.id}/edit`),class:"text-indigo-600 hover:text-indigo-900 mr-4"},{default:p(()=>[c(s(o.$t("admin.fleet.edit_car")),1)]),_:1},8,["to"]),e("button",{onClick:l=>f(t.id),class:"text-red-600 hover:text-red-900"},s(o.$t("admin.fleet.delete")),9,se)])]))),128))])])]),e("div",oe,[(i(!0),n(g,null,_(m,t=>(i(),n("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm"},[e("div",ne,[e("div",null,[e("h3",ie,s(t.model),1),e("p",ae,s(t.plate_number),1)]),e("select",{value:t.status,onChange:l=>x(t.id,l.target.value),disabled:t.status!=="maintenance",class:b([{"bg-green-100 text-green-800":t.status==="disponible","bg-red-100 text-red-800":t.status==="loue","bg-yellow-100 text-yellow-800":t.status==="maintenance","opacity-50 cursor-not-allowed":t.status!=="maintenance"},"text-xs font-semibold rounded-full border-0 py-1 px-2 focus:ring-2 focus:ring-indigo-500"])},[e("option",le,s(o.$t("admin.fleet.disponible")),1),e("option",re,s(o.$t("admin.fleet.loue")),1),e("option",ce,s(o.$t("admin.fleet.maintenance")),1)],42,de)]),e("div",ue,[r(a(h),{to:a(u)(`/admin/cars/${t.id}/edit`),class:"flex items-center text-indigo-600 hover:text-indigo-900 text-sm font-medium"},{default:p(()=>[r(a(T),{class:"h-4 w-4 mr-1"}),c(" "+s(o.$t("admin.fleet.edit_car")),1)]),_:1},8,["to"]),e("button",{onClick:l=>f(t.id),class:"flex items-center text-red-600 hover:text-red-900 text-sm font-medium"},[r(a(V),{class:"h-4 w-4 mr-1"}),c(" "+s(o.$t("admin.fleet.delete")),1)],8,me)])]))),128))])]))]))),128))]))]))}});export{xe as default};

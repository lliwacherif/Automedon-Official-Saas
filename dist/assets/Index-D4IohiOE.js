import{c as T,d as U,r as u,V as $,e as l,o as i,g as e,f as g,C as r,E as B,Z as F,h as x,j as o,i as c,F as P,n as R,a4 as w,k as E,l as b,v,b as k}from"./index-BlVnYu75.js";import{u as q}from"./useStore-BEjajSDP.js";import{P as z}from"./plus-CpbbRRHu.js";import{T as _}from"./trash-2-CPdFFUNw.js";import{L as A}from"./loader-circle-ClhvQpBH.js";import{A as G}from"./arrow-left-D9jq39-g.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=T("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),O={class:"min-h-screen bg-gray-50 py-8"},Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},J={class:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},K={class:"flex items-center"},Q={key:0,class:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg shadow-sm"},W={class:"flex"},X={class:"flex-shrink-0"},Y={class:"ml-3"},ee={class:"text-sm text-red-700 mt-1"},te={key:1,class:"flex justify-center py-20"},se={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},oe={class:"p-6 flex-1"},ie={class:"flex items-start justify-between"},le={class:"h-14 w-14 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center overflow-hidden flex-shrink-0"},ne=["src","alt"],re={class:"flex items-center space-x-2"},ae={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},de=["onClick"],ue={class:"mt-4"},ce={class:"text-lg font-bold text-gray-900 group-hover:text-indigo-600 transition-colors"},me={class:"mt-2 text-sm text-gray-600 line-clamp-3 leading-relaxed"},pe={class:"bg-gray-50 px-6 py-3 border-t border-gray-100 text-xs text-gray-500 flex justify-between items-center"},ge={key:0,class:"col-span-full py-16 text-center bg-white rounded-xl border border-dashed border-gray-300"},fe={key:3,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},xe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},be={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full"},ve={key:0,class:"h-24 w-24 relative"},ye=["src"],he={key:1,class:"text-center"},we={class:"space-y-4"},ke={class:"mt-1 relative rounded-md shadow-sm"},_e={class:"mt-6 flex justify-end gap-3 border-t border-gray-100 pt-5"},Ae=["disabled"],Me=U({__name:"Index",setup(Ce){const{apps:y,loading:C,error:h,fetchApps:j,addApp:D,deleteApp:L}=q(),d=u(!1),m=u(!1),n=u({name:"",description:"",price:0}),f=u(null),p=u(null),S=u(null);$(()=>{j()});function I(a){const t=a.target;t.files&&t.files[0]&&(f.value=t.files[0],p.value=URL.createObjectURL(t.files[0]))}async function N(){if(n.value.name){m.value=!0;try{await D(n.value,f.value||void 0),d.value=!1,n.value={name:"",description:"",price:0},f.value=null,p.value=null}catch(a){console.error(a)}finally{m.value=!1}}}async function V(a){confirm("Are you sure you want to delete this app?")&&await L(a)}return(a,t)=>{const M=F("RouterLink");return i(),l("div",O,[e("div",Z,[e("div",J,[e("div",K,[r(M,{to:"/root/dashboard",class:"p-2 mr-4 bg-white border border-gray-200 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors shadow-sm",title:"Back to Dashboard"},{default:B(()=>[r(o(G),{class:"w-5 h-5"})]),_:1}),t[7]||(t[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight"},"App Store Management"),e("p",{class:"mt-1 text-sm text-gray-500"},"Manage applications available for your tenants.")],-1))]),e("button",{onClick:t[0]||(t[0]=s=>d.value=!0),class:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 shadow-md transition-all transform hover:-translate-y-0.5"},[r(o(z),{class:"h-5 w-5 mr-2"}),t[8]||(t[8]=x(" Add New App ",-1))])]),o(h)?(i(),l("div",Q,[e("div",W,[e("div",X,[r(o(_),{class:"h-5 w-5 text-red-500"})]),e("div",Y,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-red-800"},"Error",-1)),e("p",ee,c(o(h)),1)])])])):g("",!0),o(C)&&!d.value?(i(),l("div",te,[r(o(A),{class:"animate-spin h-10 w-10 text-indigo-600"})])):(i(),l("div",se,[(i(!0),l(P,null,R(o(y),s=>(i(),l("div",{key:s.id,class:"group bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col"},[e("div",oe,[e("div",ie,[e("div",le,[s.icon_url?(i(),l("img",{key:0,src:s.icon_url,alt:s.name,class:"h-full w-full object-cover transform group-hover:scale-110 transition-transform duration-500"},null,8,ne)):(i(),k(o(w),{key:1,class:"h-7 w-7 text-indigo-500"}))]),e("div",re,[e("span",ae,c(s.price>0?`${s.price.toFixed(2)} DT`:"Free"),1),e("button",{onClick:je=>V(s.id),class:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete App"},[r(o(_),{class:"h-4 w-4"})],8,de)])]),e("div",ue,[e("h3",ce,c(s.name),1),e("p",me,c(s.description),1)])]),e("div",pe,[t[10]||(t[10]=e("span",null,[x("Status: "),e("span",{class:"font-medium text-green-600"},"Active")],-1)),e("span",null,"ID: "+c(s.id),1)])]))),128)),o(y).length===0?(i(),l("div",ge,[r(o(w),{class:"mx-auto h-12 w-12 text-gray-300"}),t[11]||(t[11]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No apps available",-1)),t[12]||(t[12]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by adding a new application to the store.",-1))])):g("",!0)])),d.value?(i(),l("div",fe,[e("div",xe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[1]||(t[1]=s=>d.value=!1)}),t[20]||(t[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),e("div",be,[t[19]||(t[19]=e("div",{class:"bg-indigo-600 px-4 py-3 sm:px-6"},[e("h3",{class:"text-lg leading-6 font-medium text-white",id:"modal-title"},"Add New Application")],-1)),e("form",{onSubmit:E(N,["prevent"]),class:"p-6 space-y-5"},[e("div",{class:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer relative",onClick:t[2]||(t[2]=s=>a.$refs.fileInput.click())},[e("input",{ref_key:"fileInput",ref:S,type:"file",accept:"image/*",onChange:I,class:"hidden"},null,544),p.value?(i(),l("div",ve,[e("img",{src:p.value,class:"h-full w-full object-contain rounded-lg"},null,8,ye),t[13]||(t[13]=e("div",{class:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded-lg"},[e("p",{class:"text-white text-xs font-medium"},"Change")],-1))])):(i(),l("div",he,[r(o(H),{class:"mx-auto h-10 w-10 text-gray-400"}),t[14]||(t[14]=e("p",{class:"mt-2 text-sm text-gray-500"},"Click to upload app icon",-1))]))]),e("div",we,[e("div",null,[t[15]||(t[15]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"App Name",-1)),b(e("input",{type:"text",id:"name","onUpdate:modelValue":t[3]||(t[3]=s=>n.value.name=s),required:"",placeholder:"e.g. Premium Analytics",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5 border"},null,512),[[v,n.value.name]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),b(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=s=>n.value.description=s),rows:"3",placeholder:"Describe features and benefits...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5 border"},null,512),[[v,n.value.description]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"price",class:"block text-sm font-medium text-gray-700"},"Price (DT)",-1)),e("div",ke,[b(e("input",{type:"number",id:"price","onUpdate:modelValue":t[5]||(t[5]=s=>n.value.price=s),min:"0",step:"0.01",class:"block w-full pl-3 pr-12 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5 border"},null,512),[[v,n.value.price,void 0,{number:!0}]]),t[17]||(t[17]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm font-medium"},"DT")],-1))])])]),e("div",_e,[e("button",{type:"button",onClick:t[6]||(t[6]=s=>d.value=!1),class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"submit",disabled:m.value,class:"px-4 py-2 bg-indigo-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[m.value?(i(),k(o(A),{key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4"})):g("",!0),x(" "+c(m.value?"Saving...":"Save Application"),1)],8,Ae)])],32)])])])):g("",!0)])])}}});export{Me as default};

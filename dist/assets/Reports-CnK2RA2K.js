import{c as x,d as C,$ as V,r as m,V as L,a as j,e as d,o as a,g as e,C as _,h as y,j as t,i as r,k as q,l as c,v as u,F as U,n as I}from"./index-_ynkWjCr.js";import{u as R}from"./useReportedClients-HApqr8vp.js";import{S as z}from"./search-BICa8v11.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=x("ListIcon",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=x("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=x("UserPlusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),T={class:"p-6 max-w-7xl mx-auto"},A={class:"mb-8"},B={class:"text-3xl font-bold text-gray-900 flex items-center"},F={class:"text-gray-600 mt-2"},P={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},E={class:"lg:col-span-1"},H={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-red-500"},$={class:"text-xl font-semibold text-gray-800 mb-6 flex items-center"},G={class:"block text-sm font-medium text-gray-700 mb-1"},J={class:"block text-sm font-medium text-gray-700 mb-1"},K={class:"block text-sm font-medium text-gray-700 mb-1"},O={class:"block text-sm font-medium text-gray-700 mb-1"},Q=["disabled"],W={class:"lg:col-span-2"},X={class:"bg-white rounded-lg shadow-md overflow-hidden"},Y={class:"p-6 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0"},Z={class:"text-xl font-semibold text-gray-800 flex items-center"},ee={class:"relative w-full sm:w-64"},te=["placeholder"],se={key:0,class:"p-8 text-center text-gray-500"},oe={key:1,class:"p-8 text-center text-gray-500 bg-gray-50"},re={key:2,class:"divide-y divide-gray-200"},le={class:"flex flex-col md:flex-row md:justify-between md:items-start"},ne={class:"flex-1"},ie={class:"flex items-center mb-2"},de={class:"text-lg font-bold text-gray-900 mr-3"},ae={class:"bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 rounded"},ce={class:"text-sm text-gray-600 mb-2 font-mono"},ue={class:"bg-red-50 border-l-4 border-red-500 p-3 rounded-r-md"},pe={class:"text-gray-800"},me={class:"mt-4 md:mt-0 md:ml-6 text-sm text-gray-500"},xe=C({__name:"Reports",setup(_e){const{t:l}=V(),{reportedClients:b,loading:g,fetchReportedClients:v,addReport:w}=R(),h=m(""),s=m({client_name:"",client_cin:"",client_phone:"",description:""}),p=m(!1);L(()=>{v()});async function k(){if(!(!s.value.client_name||!s.value.client_cin||!s.value.client_phone||!s.value.description)){p.value=!0;try{await w({client_name:s.value.client_name,client_cin:s.value.client_cin,client_phone:s.value.client_phone,description:s.value.description}),s.value={client_name:"",client_cin:"",client_phone:"",description:""}}catch{}finally{p.value=!1}}}function M(i){return i?new Date(i).toLocaleDateString():""}m([]);const f=j(()=>{const i=h.value.toLowerCase();return b.value.filter(n=>n.client_name.toLowerCase().includes(i)||n.client_cin.toLowerCase().includes(i))});return(i,n)=>(a(),d("div",T,[e("div",A,[e("h1",B,[_(t(S),{class:"w-8 h-8 text-red-600 mr-3"}),y(" "+r(t(l)("reports.title")),1)]),e("p",F,r(t(l)("reports.subtitle")),1)]),e("div",P,[e("div",E,[e("div",H,[e("h2",$,[_(t(N),{class:"w-5 h-5 mr-2"}),y(" "+r(t(l)("reports.add_report")),1)]),e("form",{onSubmit:q(k,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",G,r(t(l)("reports.client_name")),1),c(e("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>s.value.client_name=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[u,s.value.client_name]])]),e("div",null,[e("label",J,r(t(l)("reports.client_cin")),1),c(e("input",{"onUpdate:modelValue":n[1]||(n[1]=o=>s.value.client_cin=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[u,s.value.client_cin]])]),e("div",null,[e("label",K,r(t(l)("reports.client_phone")),1),c(e("input",{"onUpdate:modelValue":n[2]||(n[2]=o=>s.value.client_phone=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[u,s.value.client_phone]])]),e("div",null,[e("label",O,r(t(l)("reports.description")),1),c(e("textarea",{"onUpdate:modelValue":n[3]||(n[3]=o=>s.value.description=o),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[u,s.value.description]])]),e("button",{type:"submit",disabled:p.value||t(g),class:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 transition-colors"},r(p.value?t(l)("common.saving"):t(l)("reports.submit")),9,Q)],32)])]),e("div",W,[e("div",X,[e("div",Y,[e("h2",Z,[_(t(D),{class:"w-5 h-5 mr-2"}),y(" "+r(t(l)("reports.list_title")),1)]),e("div",ee,[c(e("input",{"onUpdate:modelValue":n[4]||(n[4]=o=>h.value=o),type:"text",placeholder:t(l)("reports.search_placeholder"),class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,8,te),[[u,h.value]]),_(t(z),{class:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})])]),t(g)&&f.value.length===0?(a(),d("div",se,r(t(l)("common.loading"))+"... ",1)):f.value.length===0?(a(),d("div",oe,r(t(l)("reports.no_reports")),1)):(a(),d("ul",re,[(a(!0),d(U,null,I(f.value,o=>(a(),d("li",{key:o.id,class:"p-6 hover:bg-gray-50 transition-colors"},[e("div",le,[e("div",ne,[e("div",ie,[e("h3",de,r(o.client_name),1),e("span",ae," CIN: "+r(o.client_cin),1)]),e("p",ce," ðŸ“ž "+r(o.client_phone),1),e("div",ue,[e("p",pe,r(o.description),1)])]),e("div",me,r(M(o.created_at)),1)])]))),128))]))])])])]))}});export{xe as default};

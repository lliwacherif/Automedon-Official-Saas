import{Y as d,r as a,U as o}from"./index-BUxJS3To.js";function h(){const l=d(),s=a([]),t=a(!1),n=a(null);async function c(){t.value=!0,n.value=null;try{const{data:r,error:e}=await o.from("reported_clients").select("*").order("created_at",{ascending:!1});if(e)throw e;s.value=r||[]}catch(r){console.error("Error fetching reported clients:",r),n.value=r.message}finally{t.value=!1}}async function u(r){if(l.currentTenant?.id){t.value=!0,n.value=null;try{const{error:e}=await o.from("reported_clients").insert([{...r,tenant_id:l.currentTenant.id}]);if(e)throw e;await c()}catch(e){throw console.error("Error adding report:",e),n.value=e.message,e}finally{t.value=!1}}}async function f(r){if(!r)return null;try{const{data:e,error:i}=await o.from("reported_clients").select("*").eq("client_cin",r).maybeSingle();if(i)throw i;return e}catch(e){return console.error("Error checking client status:",e),null}}return{reportedClients:s,loading:t,error:n,fetchReportedClients:c,addReport:u,checkClientStatus:f}}export{h as u};

import{d as te,r as g,w as L,e as r,o as d,l as v,g as e,v as _,m as q,F as z,n as A,j as n,i as o,$ as de,a0 as ue,a as I,a2 as ce,V as me,f as h,k as ve,C as X,H as R,W as pe,h as Z}from"./index-BlVnYu75.js";import{u as _e}from"./useReservations-DSglpFzk.js";import{u as ge}from"./useReservationDocuments-7Df6Wv9q.js";import{u as be}from"./useCars-BkAsT5Lt.js";import{u as fe}from"./useReportedClients-wqqxvpi-.js";import{a as W}from"./date-BpD5EXL9.js";import"./useFileUpload-Bi_F3Nvw.js";const xe={class:"flex space-x-2"},ye=["required"],he={class:"flex w-1/2 items-center gap-1"},we=["value"],ke=["value"],ee=te({__name:"DateTimeInput",props:{modelValue:{},required:{type:Boolean}},emits:["update:modelValue"],setup(H,{emit:l}){const k=H,D=l,F=Array.from({length:24},(m,u)=>String(u).padStart(2,"0")),S=["00","30"],p=g(""),b=g("09"),x=g("00");function N(){if(k.modelValue){const m=k.modelValue.split("T");if(m.length>=2){p.value=m[0];const u=m[1].split(":");u.length>=2&&(b.value=u[0],x.value=S.includes(u[1].substring(0,2))?u[1].substring(0,2):"00")}else m.length===1&&m[0]&&(p.value=m[0],b.value="09",x.value="00")}else p.value="",b.value="09",x.value="00"}return L(()=>k.modelValue,()=>{const m=p.value?`${p.value}T${b.value}:${x.value}`:"";k.modelValue&&(!m||!k.modelValue.startsWith(m))&&N()},{immediate:!0}),L([p,b,x],([m,u,c])=>{m&&u&&c?D("update:modelValue",`${m}T${u}:${c}`):D("update:modelValue","")}),(m,u)=>(d(),r("div",xe,[v(e("input",{"onUpdate:modelValue":u[0]||(u[0]=c=>p.value=c),type:"date",required:m.required,class:"block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"},null,8,ye),[[_,p.value]]),e("div",he,[v(e("select",{"onUpdate:modelValue":u[1]||(u[1]=c=>b.value=c),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-0 py-2 border text-center"},[(d(!0),r(z,null,A(n(F),c=>(d(),r("option",{key:c,value:c},o(c),9,we))),128))],512),[[q,b.value]]),u[3]||(u[3]=e("span",{class:"text-gray-500 font-bold"},":",-1)),v(e("select",{"onUpdate:modelValue":u[2]||(u[2]=c=>x.value=c),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-0 py-2 border text-center"},[(d(),r(z,null,A(S,c=>e("option",{key:c,value:c},o(c),9,ke)),64))],512),[[q,x.value]])])]))}}),Ve={class:"max-w-4xl mx-auto p-6"},Ce={class:"mb-6"},Ue={class:"text-2xl font-semibold text-gray-900"},$e={key:0,class:"text-sm text-gray-500 mt-1"},De={key:0,class:"bg-white shadow-md rounded-lg p-6 text-center"},Se={class:"mt-4 text-gray-500"},Me={class:"border-b pb-4"},Te={class:"text-lg font-medium text-gray-900 mb-4"},je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Re={class:"block text-sm font-medium text-gray-700 mb-1"},Le={class:"block text-sm font-medium text-gray-700 mb-1"},qe={class:"block text-sm font-medium text-gray-700 mb-1"},ze={class:"block text-sm font-medium text-gray-700 mb-1"},Ae={class:"border-b pb-4"},Fe={class:"text-lg font-medium text-gray-900 mb-4"},Ne={class:"mb-4"},Pe={class:"block text-sm font-medium text-gray-700 mb-1"},Be=["disabled"],Ie={value:0},We=["value"],He={class:"mb-4"},Ee={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Oe={class:"block text-sm font-medium text-gray-700 mb-1"},Ye={key:0,class:"mt-1 text-xs text-indigo-600 font-medium"},Ge={class:"block text-sm font-medium text-gray-700 mb-1"},Je={key:0,class:"mt-1 text-xs text-indigo-600 font-medium"},Ke={class:"block text-sm font-medium text-gray-700 mb-1"},Qe={class:"text-xs text-gray-500 mt-1"},Xe={class:"border-b pb-4"},Ze={class:"text-lg font-medium text-gray-900 mb-4"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tt={class:"block text-sm font-medium text-gray-700 mb-1"},st={class:"block text-sm font-medium text-gray-700 mb-1"},at={class:"text-xs text-gray-500 mt-1"},ot={class:"mt-4 pt-4 border-t border-gray-100"},nt={class:"text-sm font-medium text-gray-900 mb-4"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},it={class:"bg-indigo-50 p-3 rounded-md border border-indigo-100"},rt={key:0,class:"text-xs text-green-700 mt-1 font-medium"},dt={key:0,class:"border-b pb-4"},ut={class:"text-lg font-medium text-gray-900 mb-4"},ct={class:"max-w-xs"},mt={class:"block text-sm font-medium text-gray-700 mb-1"},vt={value:"pending"},pt={value:"confirmed"},_t={value:"active"},gt={value:"completed"},bt={value:"cancelled"},ft={class:"mt-3 flex items-center space-x-2"},xt={key:1,class:"border-b pb-4"},yt={class:"text-lg font-medium text-gray-900 mb-4"},ht={key:0,class:"mb-6"},wt={class:"flex items-center space-x-4"},kt={key:0,class:"animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"},Vt={key:1,class:"mb-6 p-4 bg-yellow-50 text-yellow-800 rounded-md text-sm border border-yellow-200"},Ct={key:2,class:"bg-gray-50 rounded-lg overflow-hidden border border-gray-200"},Ut={class:"min-w-full divide-y divide-gray-200"},$t={class:"bg-white divide-y divide-gray-200"},Dt={class:"px-6 py-4 whitespace-nowrap"},St={class:"flex items-center"},Mt={class:"flex-shrink-0 h-8 w-8 flex items-center justify-center bg-indigo-100 rounded-lg text-indigo-600"},Tt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},jt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Rt={class:"ml-4"},Lt={class:"text-sm font-medium text-gray-900"},qt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},zt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3"},At=["href"],Ft=["onClick"],Nt={key:3,class:"text-sm text-gray-500 italic"},Pt={class:"text-lg font-medium text-gray-900 mb-4"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},It={class:"block text-sm font-medium text-gray-700 mb-1"},Wt={class:"block text-sm font-medium text-gray-700 mb-1"},Ht={class:"block text-sm font-medium text-gray-700 mb-1"},Et={class:"flex justify-end space-x-3 pt-4"},Ot=["disabled"],Yt={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Gt={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Jt={class:"p-6"},Kt={key:0,class:"mb-4 border rounded-lg overflow-hidden"},Qt=["src"],Xt={key:1,class:"mb-4 p-6 bg-gray-50 rounded-lg text-center"},Zt={class:"text-sm font-medium text-gray-900"},es={class:"text-xs text-gray-500 mt-1"},ts={class:"flex justify-end space-x-3"},ss=["disabled"],as={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},os={class:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 border-l-4 border-red-500"},ns={class:"flex items-center mb-4"},ls={class:"text-xl font-bold text-red-600"},is={class:"text-gray-800 font-medium mb-2"},rs={class:"bg-red-50 p-3 rounded mb-4 text-sm text-gray-700"},ds={class:"font-bold"},us={class:"text-gray-600 mb-6 text-sm"},cs={class:"flex justify-end space-x-3"},xs=te({__name:"Edit",setup(H){const{t:l}=de(),{getReservation:k,createReservation:D,updateReservation:F,checkAvailability:S}=_e(),{documents:p,loading:b,fetchDocuments:x,uploadDocument:N,deleteDocument:m}=ge(),{cars:u,fetchCars:c,updateCar:P}=be(),{tenantPath:E}=ue(),{checkClientStatus:se}=fe(),w=ce(),O=pe(),y=I(()=>!!w.params.id&&w.params.id!=="new"),f=g(!1),M=g(!0),C=g(null),V=g(null),B=g(!1),T=g(null),j=g(!1),Y=g(!1),t=g({client_name:"",client_cin:"",client_phone:"",client_email:"",start_date:"",end_date:"",duration_days:0,price_per_day:0,total_price:0,advance_payment:0,car_id:0,status:"confirmed",pickup_location:"",return_location:"",notes:"",contract_number:""});function G(i){if(!i)return"";try{const s=new Date(i),a=s.getFullYear(),U=String(s.getMonth()+1).padStart(2,"0"),le=String(s.getDate()).padStart(2,"0"),ie=String(s.getHours()).padStart(2,"0"),re=String(s.getMinutes()).padStart(2,"0");return`${a}-${U}-${le}T${ie}:${re}`}catch{return""}}me(async()=>{if(await c(),y.value){const i=await k(Number(w.params.id));i&&(t.value={...i,start_date:G(i.start_date),end_date:G(i.end_date)},await x(Number(w.params.id)))}M.value=!1}),L([()=>t.value.start_date,()=>t.value.end_date],()=>{if(!M.value&&t.value.start_date&&t.value.end_date){const i=new Date(t.value.start_date),a=new Date(t.value.end_date).getTime()-i.getTime(),U=Math.ceil(a/(1e3*60*60*24));t.value.duration_days=U>0?U:0,J()}}),L([()=>t.value.price_per_day,()=>t.value.duration_days],()=>{M.value||J()});function J(){const i=t.value.duration_days||0,s=t.value.price_per_day||0;t.value.total_price=i*s}const $=I(()=>{const i=t.value.total_price||0,s=t.value.advance_payment||0;return Math.max(0,i-s)});async function K(){f.value=!0;try{if(!t.value.client_name||!t.value.client_cin||!t.value.client_phone||!t.value.car_id||!t.value.start_date||!t.value.end_date){alert(l("admin.reservations.validation_error")),f.value=!1;return}if(!Y.value&&t.value.client_cin){const a=await se(t.value.client_cin);if(a){T.value=a,j.value=!0,f.value=!1;return}}if((t.value.duration_days||0)<=0){alert(l("admin.reservations.invalid_dates")),f.value=!1;return}const i={client_name:t.value.client_name,client_cin:t.value.client_cin,client_phone:t.value.client_phone,client_email:t.value.client_email||null,car_id:t.value.car_id,start_date:new Date(t.value.start_date).toISOString(),end_date:new Date(t.value.end_date).toISOString(),duration_days:t.value.duration_days,price_per_day:t.value.price_per_day,total_price:t.value.total_price,advance_payment:t.value.advance_payment||0,status:t.value.status||"confirmed",pickup_location:t.value.pickup_location||null,return_location:t.value.return_location||null,notes:t.value.notes||null,contract_number:t.value.contract_number||null};if(!await S(t.value.car_id,i.start_date,i.end_date,y.value?Number(w.params.id):void 0)){alert(l("admin.reservations.error_dates_conflict")||"These dates conflict with another confirmed or active reservation."),f.value=!1;return}if(t.value.status==="active"&&new Date(t.value.start_date)>new Date){alert('⚠️ Impossible de mettre le statut sur "Actif" pour une réservation future. Veuillez utiliser "Confirmé".'),f.value=!1;return}if(y.value){await F(Number(w.params.id),i);const a=t.value.car_id||t.value.car?.id;a&&a>0&&(i.status==="active"?await P(a,{status:"loue"}):(i.status==="completed"||i.status==="cancelled")&&await P(a,{status:"disponible"}))}else{await D(i);const a=t.value.car_id||t.value.car?.id;a&&a>0&&i.status==="active"?await P(a,{status:"loue"}):alert(l("admin.reservations.saved_success"))}O.push(E("/admin/reservations"))}catch(i){alert(l("admin.reservations.save_error")+": "+i.message)}finally{f.value=!1}}const ae=I(()=>u.value||[]);async function oe(i){const s=i.target;if(s.files&&s.files[0]){const a=s.files[0];C.value=a,a.type.startsWith("image/")?V.value=URL.createObjectURL(a):V.value=null,B.value=!0,s.value=""}}async function ne(){if(C.value&&y.value&&w.params.id)try{await N(Number(w.params.id),C.value),Q()}catch{alert(l("admin.reservations.upload_error"))}}function Q(){V.value&&URL.revokeObjectURL(V.value),C.value=null,V.value=null,B.value=!1}return(i,s)=>(d(),r("div",Ve,[e("div",Ce,[e("h1",Ue,o(y.value?n(l)("admin.reservations.edit_title"):n(l)("admin.reservations.new_title")),1),y.value&&t.value.reservation_number?(d(),r("p",$e,o(t.value.reservation_number),1)):h("",!0)]),M.value?(d(),r("div",De,[s[19]||(s[19]=e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"},null,-1)),e("p",Se,o(n(l)("common.loading"))+"...",1)])):(d(),r("form",{key:1,onSubmit:ve(K,["prevent"]),class:"bg-white shadow-md rounded-lg p-6 space-y-6"},[e("div",Me,[e("h2",Te,o(n(l)("admin.reservations.client_info")),1),e("div",je,[e("div",null,[e("label",Re,o(n(l)("admin.reservations.client_name"))+" * ",1),v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.client_name=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.client_name]])]),e("div",null,[e("label",Le,o(n(l)("admin.reservations.client_cin"))+" * ",1),v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.client_cin=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.client_cin]])]),e("div",null,[e("label",qe,o(n(l)("admin.reservations.client_phone"))+" * ",1),v(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.value.client_phone=a),type:"tel",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.client_phone]])]),e("div",null,[e("label",ze,o(n(l)("admin.reservations.client_email")),1),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>t.value.client_email=a),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.client_email]])])])]),e("div",Ae,[e("h2",Fe,o(n(l)("admin.reservations.reservation_details")),1),e("div",Ne,[e("label",Pe,o(n(l)("admin.reservations.select_car"))+" * ",1),v(e("select",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.value.car_id=a),required:"",disabled:y.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[e("option",Ie,o(n(l)("admin.reservations.choose_car")),1),(d(!0),r(z,null,A(ae.value,a=>(d(),r("option",{key:a.id,value:a.id},o(a.brand)+" "+o(a.model)+" - "+o(a.plate_number),9,We))),128))],8,Be),[[q,t.value.car_id]])]),e("div",He,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Numéro de Contrat (Max 4 chars) ",-1)),v(e("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>t.value.contract_number=a),type:"text",maxlength:"4",placeholder:"Ex: 1234",class:"uppercase w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.contract_number]])]),e("div",Ee,[e("div",null,[e("label",Oe,o(n(l)("admin.reservations.start_date"))+" * ",1),X(ee,{modelValue:t.value.start_date,"onUpdate:modelValue":s[6]||(s[6]=a=>t.value.start_date=a),required:!0},null,8,["modelValue"]),t.value.start_date?(d(),r("p",Ye,o(n(W)(t.value.start_date)),1)):h("",!0)]),e("div",null,[e("label",Ge,o(n(l)("admin.reservations.end_date"))+" * ",1),X(ee,{modelValue:t.value.end_date,"onUpdate:modelValue":s[7]||(s[7]=a=>t.value.end_date=a),required:!0},null,8,["modelValue"]),t.value.end_date?(d(),r("p",Je,o(n(W)(t.value.end_date)),1)):h("",!0)]),e("div",null,[e("label",Ke,o(n(l)("admin.reservations.duration")),1),v(e("input",{"onUpdate:modelValue":s[8]||(s[8]=a=>t.value.duration_days=a),type:"number",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"},null,512),[[_,t.value.duration_days]]),e("p",Qe,o(n(l)("admin.reservations.auto_calculated")),1)])])]),e("div",Xe,[e("h2",Ze,o(n(l)("admin.reservations.pricing")),1),e("div",et,[e("div",null,[e("label",tt,o(n(l)("admin.reservations.price_per_day"))+" * (€) ",1),v(e("input",{"onUpdate:modelValue":s[9]||(s[9]=a=>t.value.price_per_day=a),type:"number",step:"0.0001",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.price_per_day,void 0,{number:!0}]])]),e("div",null,[e("label",st,o(n(l)("admin.reservations.total_price"))+" (€) ",1),v(e("input",{"onUpdate:modelValue":s[10]||(s[10]=a=>t.value.total_price=a),type:"number",step:"0.0001",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-lg font-semibold"},null,512),[[_,t.value.total_price]]),e("p",at,o(n(l)("admin.reservations.auto_calculated")),1)])]),e("div",ot,[e("h3",nt,o(n(l)("admin.reservations.payment_details")||"Paiement"),1),e("div",lt,[e("div",it,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-indigo-900 mb-1"}," Acompte / Avance (€) ",-1)),v(e("input",{"onUpdate:modelValue":s[11]||(s[11]=a=>t.value.advance_payment=a),type:"number",step:"0.0001",class:"w-full px-3 py-2 border border-indigo-200 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white",placeholder:"0.00"},null,512),[[_,t.value.advance_payment,void 0,{number:!0}]])]),e("div",{class:R(["p-3 rounded-md border",$.value>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"])},[e("label",{class:R(["block text-sm font-bold mb-1",$.value>0?"text-red-800":"text-green-800"])}," Reste à Payer (€) ",2),e("div",{class:R(["text-2xl font-bold",$.value>0?"text-red-600":"text-green-600"])},o($.value.toFixed(2))+" € ",3),$.value===0?(d(),r("p",rt,"✅ Payé en totalité")):h("",!0)],2)])])]),y.value?(d(),r("div",dt,[e("h2",ut,o(n(l)("common.status")),1),e("div",ct,[e("label",mt,o(n(l)("admin.reservations.status_filter")),1),v(e("select",{"onUpdate:modelValue":s[12]||(s[12]=a=>t.value.status=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[e("option",vt,o(n(l)("admin.reservations.status_pending")),1),e("option",pt,o(n(l)("admin.reservations.status_confirmed")),1),e("option",_t,o(n(l)("admin.reservations.status_active")),1),e("option",gt,o(n(l)("admin.reservations.status_completed")),1),e("option",bt,o(n(l)("admin.reservations.status_cancelled")),1)],512),[[q,t.value.status]]),e("div",ft,[s[22]||(s[22]=e("span",{class:"text-sm text-gray-500"},"Statut actuel:",-1)),e("span",{class:R([{"bg-yellow-100 text-yellow-800":t.value.status==="pending","bg-blue-100 text-blue-800":t.value.status==="confirmed","bg-green-100 text-green-800":t.value.status==="active","bg-gray-100 text-gray-800":t.value.status==="completed","bg-red-100 text-red-800":t.value.status==="cancelled"},"px-3 py-1 text-sm font-semibold rounded-full capitalize"])},o(t.value.status),3)])])])):h("",!0),y.value?(d(),r("div",xt,[e("h2",yt," Documents & Contrats ("+o(n(p).length)+"/3) ",1),n(p).length<3?(d(),r("div",ht,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Capturer / Téléverser Contrat ",-1)),e("div",wt,[e("input",{type:"file",accept:"image/*,application/pdf",capture:"environment",onChange:oe,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),n(b)?(d(),r("div",kt)):h("",!0)])])):(d(),r("div",Vt," Maximum de 3 documents atteint. Veuillez en supprimer un pour en ajouter un nouveau. ")),n(p).length>0?(d(),r("div",Ct,[e("table",Ut,[s[26]||(s[26]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fichier "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date d'ajout "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",$t,[(d(!0),r(z,null,A(n(p),a=>(d(),r("tr",{key:a.id},[e("td",Dt,[e("div",St,[e("div",Mt,[a.file_name.toLowerCase().endsWith(".pdf")?(d(),r("svg",Tt,[...s[24]||(s[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])):(d(),r("svg",jt,[...s[25]||(s[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),e("div",Rt,[e("div",Lt,o(a.file_name),1)])])]),e("td",qt,o(n(W)(a.uploaded_at)),1),e("td",zt,[e("a",{href:a.file_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900"}," Voir ",8,At),e("button",{onClick:U=>n(m)(a.id,a.file_url),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Ft)])]))),128))])])])):(d(),r("div",Nt," Aucun document téléversé. "))])):h("",!0),e("div",null,[e("h2",Pt,o(n(l)("admin.reservations.optional")),1),e("div",Bt,[e("div",null,[e("label",It,o(n(l)("admin.reservations.pickup_location")),1),v(e("input",{"onUpdate:modelValue":s[13]||(s[13]=a=>t.value.pickup_location=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.pickup_location]])]),e("div",null,[e("label",Wt,o(n(l)("admin.reservations.return_location")),1),v(e("input",{"onUpdate:modelValue":s[14]||(s[14]=a=>t.value.return_location=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.return_location]])])]),e("div",null,[e("label",Ht,o(n(l)("admin.reservations.notes")),1),v(e("textarea",{"onUpdate:modelValue":s[15]||(s[15]=a=>t.value.notes=a),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_,t.value.notes]])])]),e("div",Et,[e("button",{type:"button",onClick:s[16]||(s[16]=a=>n(O).push(n(E)("/admin/reservations"))),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},o(n(l)("common.cancel")),1),e("button",{type:"submit",disabled:f.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50"},o(f.value?n(l)("common.saving"):n(l)("common.save")),9,Ot)])],32)),B.value?(d(),r("div",Yt,[e("div",Gt,[e("div",Jt,[s[28]||(s[28]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Aperçu du document",-1)),V.value?(d(),r("div",Kt,[e("img",{src:V.value,alt:"Preview",class:"w-full h-auto"},null,8,Qt)])):(d(),r("div",Xt,[s[27]||(s[27]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-indigo-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("p",Zt,o(C.value?.name),1),e("p",es,o(((C.value?.size||0)/1024/1024).toFixed(2))+" MB",1)])),e("div",ts,[e("button",{onClick:Q,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Annuler "),e("button",{onClick:ne,disabled:n(b),class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50"},o(n(b)?"Téléversement...":"Confirmer"),9,ss)])])])])):h("",!0),j.value?(d(),r("div",as,[e("div",os,[e("div",ns,[s[29]||(s[29]=e("svg",{class:"h-8 w-8 text-red-600 mr-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("h3",ls,o(n(l)("reports.warning_title")),1)]),e("p",is,o(n(l)("reports.warning_message",{cin:T.value?.client_cin})),1),e("div",rs,[e("span",ds,o(n(l)("reports.description"))+":",1),s[30]||(s[30]=Z()),s[31]||(s[31]=e("br",null,null,-1)),Z(' "'+o(T.value?.description)+'" ',1)]),e("p",us,o(n(l)("reports.warning_description",{reason:T.value?.description})),1),e("div",cs,[e("button",{onClick:s[17]||(s[17]=a=>{j.value=!1,f.value=!1}),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},o(n(l)("reports.cancel_reservation")),1),e("button",{onClick:s[18]||(s[18]=a=>{j.value=!1,Y.value=!0,K()}),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"},o(n(l)("reports.confirm_anyway")),1)])])])):h("",!0)]))}});export{xs as default};

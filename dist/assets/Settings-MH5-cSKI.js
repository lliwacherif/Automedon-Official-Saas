import{d as L,u as B,Y as M,$ as j,r as a,e as m,o,g as e,f as l,i as t,k as U,l as p,v as f,b as S,h as V,j as x}from"./index-_ynkWjCr.js";import{L as P}from"./loader-circle-C3H0fwz6.js";const N={class:"p-6"},A={class:"text-2xl font-bold mb-6 text-gray-800 dark:text-gray-100"},D={class:"max-w-md bg-white dark:bg-gray-800 rounded-lg shadow p-6"},E={class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200"},H={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},I=["placeholder"],Y={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},z=["placeholder"],F={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},G=["placeholder"],J={key:0,class:"text-red-600 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-md"},K={key:1,class:"text-green-600 text-sm bg-green-50 dark:bg-green-900/20 p-3 rounded-md"},O=["disabled"],Q={key:0,class:"max-w-md bg-white dark:bg-gray-800 rounded-lg shadow p-6 mt-6"},R={class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200"},W=["innerHTML"],X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Z={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ee=["placeholder"],se={key:0,class:"text-red-600 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-md"},te={key:1,class:"text-green-600 text-sm bg-green-50 dark:bg-green-900/20 p-3 rounded-md"},ae=["disabled"],de=L({__name:"Settings",setup(re){const $=B(),T=M(),{t:d}=j(),v=a(""),i=a(""),w=a(""),y=a(!1),u=a(""),h=a(""),q=async()=>{if(u.value="",h.value="",i.value!==w.value){u.value=d("admin.settings.password_mismatch");return}if(i.value.length<6){u.value=d("admin.settings.password_min_length");return}y.value=!0;try{await $.changeAdminPassword(v.value,i.value),h.value=d("admin.settings.password_success"),v.value="",i.value="",w.value=""}catch(s){u.value=s.message||d("admin.settings.password_error")}finally{y.value=!1}},g=a(""),c=a(""),_=a(!1),b=a(""),k=a(""),C=async()=>{if(b.value="",k.value="",c.value.length<6){b.value=d("admin.settings.password_min_length");return}_.value=!0;try{await T.createTenantUser(g.value,c.value,"user"),k.value=d("admin.settings.user_created_success",{username:g.value}),g.value="",c.value=""}catch(s){b.value=s.message||d("admin.settings.create_user_error")}finally{_.value=!1}};return(s,r)=>(o(),m("div",N,[e("h1",A,t(s.$t("admin.settings.title")),1),e("div",D,[e("h2",E,t(s.$t("admin.settings.change_password_title")),1),e("form",{onSubmit:U(q,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",H,t(s.$t("admin.settings.current_password")),1),p(e("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>v.value=n),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:s.$t("admin.settings.current_password")},null,8,I),[[f,v.value]])]),e("div",null,[e("label",Y,t(s.$t("admin.settings.new_password")),1),p(e("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>i.value=n),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:s.$t("admin.settings.new_password")},null,8,z),[[f,i.value]])]),e("div",null,[e("label",F,t(s.$t("admin.settings.confirm_password")),1),p(e("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>w.value=n),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:s.$t("admin.settings.confirm_password")},null,8,G),[[f,w.value]])]),u.value?(o(),m("div",J,t(u.value),1)):l("",!0),h.value?(o(),m("div",K,t(h.value),1)):l("",!0),e("button",{type:"submit",disabled:y.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(o(),S(x(P),{key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4"})):l("",!0),V(" "+t(s.$t("admin.settings.change_password_submit")),1)],8,O)],32)]),x($).role==="admin"?(o(),m("div",Q,[e("h2",R,t(s.$t("admin.settings.create_user_title")),1),e("p",{class:"text-sm text-gray-500 mb-4",innerHTML:s.$t("admin.settings.create_user_desc")},null,8,W),e("form",{onSubmit:U(C,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",X,t(s.$t("admin.settings.username")),1),p(e("input",{"onUpdate:modelValue":r[3]||(r[3]=n=>g.value=n),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g. staff1"},null,512),[[f,g.value]])]),e("div",null,[e("label",Z,t(s.$t("admin.settings.initial_password")),1),p(e("input",{"onUpdate:modelValue":r[4]||(r[4]=n=>c.value=n),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:s.$t("admin.settings.initial_password")},null,8,ee),[[f,c.value]])]),b.value?(o(),m("div",se,t(b.value),1)):l("",!0),k.value?(o(),m("div",te,t(k.value),1)):l("",!0),e("button",{type:"submit",disabled:_.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},[_.value?(o(),S(x(P),{key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4"})):l("",!0),V(" "+t(s.$t("admin.settings.create_user_submit")),1)],8,ae)],32)])):l("",!0)]))}});export{de as default};

import{c as V,d as D,r as a,V as T,e as i,o,g as e,f as x,C as m,h as U,j as l,i as p,F as L,n as M,k as B,b as h,l as g,v,a4 as I}from"./index-_ynkWjCr.js";import{u as P}from"./useStore-B73qlov7.js";import{P as F}from"./plus-m20a5_he.js";import{T as _}from"./trash-2-zkxsYHxt.js";import{L as $}from"./loader-circle-C3H0fwz6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=V("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),q={class:"space-y-6"},z={class:"flex justify-between items-center"},E={key:0,class:"bg-red-50 border-l-4 border-red-400 p-4"},H={class:"flex"},O={class:"flex-shrink-0"},G={class:"ml-3"},J={class:"text-sm text-red-700"},K={key:1,class:"flex justify-center py-12"},Q={key:2,class:"bg-white shadow overflow-hidden sm:rounded-md"},W={role:"list",class:"divide-y divide-gray-200"},X={class:"px-4 py-4 sm:px-6 flex items-center justify-between"},Y={class:"flex items-center"},Z={class:"flex-shrink-0 h-10 w-10 rounded-md bg-gray-100 flex items-center justify-center overflow-hidden"},ee=["src","alt"],te={class:"ml-4"},se={class:"text-lg font-medium text-gray-900"},oe={class:"text-sm text-gray-500 line-clamp-1"},ie={class:"flex items-center space-x-4"},le={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},ne=["onClick"],de={key:0,class:"px-4 py-8 text-center text-gray-500"},re={key:3,class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-50 flex items-center justify-center p-4"},ae={class:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden"},ce={class:"mt-1 flex items-center space-x-4"},ue={class:"h-16 w-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-300"},me=["src"],pe={class:"mt-1 relative rounded-md shadow-sm"},fe={class:"mt-6 flex justify-end space-x-3"},xe=["disabled"],ge={key:0},ve={key:1},je=D({__name:"Index",setup(ye){const{apps:y,loading:w,error:b,fetchApps:k,addApp:A,deleteApp:j}=P(),r=a(!1),c=a(!1),n=a({name:"",description:"",price:0}),f=a(null),u=a(null);T(()=>{k()});function C(d){const t=d.target;t.files&&t.files[0]&&(f.value=t.files[0],u.value=URL.createObjectURL(t.files[0]))}async function N(){if(n.value.name){c.value=!0;try{await A(n.value,f.value||void 0),r.value=!1,n.value={name:"",description:"",price:0},f.value=null,u.value=null}catch(d){console.error(d)}finally{c.value=!1}}}async function S(d){confirm("Are you sure you want to delete this app?")&&await j(d)}return(d,t)=>(o(),i("div",q,[e("div",z,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Manage Store Apps",-1)),e("button",{onClick:t[0]||(t[0]=s=>r.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700"},[m(l(F),{class:"h-5 w-5 mr-2"}),t[5]||(t[5]=U(" Add New App ",-1))])]),l(b)?(o(),i("div",E,[e("div",H,[e("div",O,[m(l(_),{class:"h-5 w-5 text-red-400"})]),e("div",G,[e("p",J,p(l(b)),1)])])])):x("",!0),l(w)&&!r.value?(o(),i("div",K,[m(l($),{class:"animate-spin h-8 w-8 text-indigo-600"})])):(o(),i("div",Q,[e("ul",W,[(o(!0),i(L,null,M(l(y),s=>(o(),i("li",{key:s.id},[e("div",X,[e("div",Y,[e("div",Z,[s.icon_url?(o(),i("img",{key:0,src:s.icon_url,alt:s.name,class:"h-full w-full object-cover"},null,8,ee)):(o(),h(l(I),{key:1,class:"h-6 w-6 text-gray-400"}))]),e("div",te,[e("h3",se,p(s.name),1),e("div",oe,p(s.description),1)])]),e("div",ie,[e("span",le,p(s.price)+" DT ",1),e("button",{onClick:be=>S(s.id),class:"text-red-600 hover:text-red-900 p-2"},[m(l(_),{class:"h-5 w-5"})],8,ne)])])]))),128)),l(y).length===0?(o(),i("li",de," No apps in the store yet. ")):x("",!0)])])),r.value?(o(),i("div",re,[e("div",ae,[t[12]||(t[12]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Add New App")],-1)),e("form",{onSubmit:B(N,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"App Icon",-1)),e("div",ce,[e("div",ue,[u.value?(o(),i("img",{key:0,src:u.value,class:"h-full w-full object-cover"},null,8,me)):(o(),h(l(R),{key:1,class:"h-8 w-8 text-gray-400"}))]),e("input",{type:"file",accept:"image/*",onChange:C,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32)])]),e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"App Name",-1)),g(e("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.name=s),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[v,n.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),g(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.description=s),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[v,n.value.description]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"price",class:"block text-sm font-medium text-gray-700"},"Price (DT)",-1)),e("div",pe,[g(e("input",{type:"number",id:"price","onUpdate:modelValue":t[3]||(t[3]=s=>n.value.price=s),min:"0",step:"0.01",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-3 pr-12 sm:text-sm border-gray-300 rounded-md"},null,512),[[v,n.value.price,void 0,{number:!0}]]),t[10]||(t[10]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"DT")],-1))])]),e("div",fe,[e("button",{type:"button",onClick:t[4]||(t[4]=s=>r.value=!1),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:c.value,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50"},[c.value?(o(),i("span",ge,"Saving...")):(o(),i("span",ve,"Save App"))],8,xe)])],32)])])):x("",!0)]))}});export{je as default};

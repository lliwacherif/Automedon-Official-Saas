import{d as w,u as k,r as v,V as $,w as C,e as d,o as r,g as e,i as t,l as M,m as V,j as n,C as h,E as _,a1 as p,f as j,F as N,n as S,h as z,H as B}from"./index-BgCL6C0w.js";import{u as D}from"./useReservations-vuFAFkz7.js";import{f as x}from"./date-BpD5EXL9.js";const R={class:"min-h-screen bg-gray-100"},F={class:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},E={class:"text-2xl font-bold text-gray-900 mb-6"},H={class:"bg-white p-4 rounded-lg shadow mb-6"},L={value:"all"},T={value:"pending"},U={value:"confirmed"},A={value:"active"},I={value:"completed"},P={value:"cancelled"},q={key:0,class:"bg-white shadow rounded-lg p-8 text-center"},G={class:"mt-4 text-gray-500"},J={key:1,class:"bg-white shadow rounded-lg p-8 text-center"},K={class:"mt-2 text-sm font-medium text-gray-900"},O={class:"mt-6"},Q={key:2,class:"space-y-4"},W={class:"p-6"},X={class:"flex items-center justify-between"},Y={class:"flex items-center space-x-4"},Z={class:"flex-shrink-0"},ee=["src","alt"],te={class:"text-lg font-semibold text-gray-900"},se={class:"text-sm text-gray-500"},oe={class:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ae={class:"text-gray-500"},ne={class:"font-medium text-gray-900"},ie={class:"text-gray-500"},de={class:"font-medium text-gray-900"},re={class:"text-gray-500"},le={class:"font-medium text-gray-900"},ce={class:"text-gray-500"},me={class:"font-medium text-indigo-600"},ue={key:0,class:"flex justify-center mt-6"},ge={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},ve=["disabled"],he={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},_e=["disabled"],ye=w({__name:"Index",setup(pe){const{reservations:m,loading:b,total:l,fetchUserReservations:f}=D(),u=k(),i=v(1),c=v("all"),g=()=>{u.user&&f(u.user.id,i.value,c.value)};$(()=>{g()}),C([i,c],()=>{g()});const y=o=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800";return(o,a)=>(r(),d("div",R,[e("div",F,[e("h1",E,t(o.$t("nav.my_bookings")),1),e("div",H,[M(e("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:w-48 sm:text-sm"},[e("option",L,t(o.$t("admin.reservations.all_statuses")),1),e("option",T,t(o.$t("admin.reservations.status_pending")),1),e("option",U,t(o.$t("admin.reservations.status_confirmed")),1),e("option",A,t(o.$t("admin.reservations.status_active")),1),e("option",I,t(o.$t("admin.reservations.status_completed")),1),e("option",P,t(o.$t("admin.reservations.status_cancelled")),1)],512),[[V,c.value]])]),n(b)?(r(),d("div",q,[a[3]||(a[3]=e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"},null,-1)),e("p",G,t(o.$t("common.loading"))+"...",1)])):n(m).length===0?(r(),d("div",J,[a[4]||(a[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e("h3",K,t(o.$t("admin.reservations.no_reservations")),1),a[5]||(a[5]=e("p",{class:"mt-1 text-sm text-gray-500"},"Vous n'avez pas encore de réservations.",-1)),e("div",O,[h(n(p),{to:"/fleet",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"},{default:_(()=>[z(t(o.$t("home.view_fleet")),1)]),_:1})])])):(r(),d("div",Q,[(r(!0),d(N,null,S(n(m),s=>(r(),d("div",{key:s.id,class:"bg-white shadow rounded-lg overflow-hidden hover:shadow-md transition-shadow"},[h(n(p),{to:`/client/reservations/${s.id}`,class:"block"},{default:_(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("img",{src:s.car?.image_url||"/images/car-default.jpg",alt:s.car?.brand+" "+s.car?.model,class:"h-16 w-24 object-cover rounded-md"},null,8,ee)]),e("div",null,[e("h3",te,t(s.car?.brand)+" "+t(s.car?.model),1),e("p",se,t(s.reservation_number),1)])]),e("span",{class:B([y(s.status),"px-3 py-1 text-xs font-semibold rounded-full capitalize"])},t(s.status),3)]),e("div",oe,[e("div",null,[e("p",ae,t(o.$t("admin.reservations.start_date")),1),e("p",ne,t(n(x)(s.start_date)),1)]),e("div",null,[e("p",ie,t(o.$t("admin.reservations.end_date")),1),e("p",de,t(n(x)(s.end_date)),1)]),e("div",null,[e("p",re,t(o.$t("admin.reservations.duration")),1),e("p",le,t(s.duration_days)+" "+t(o.$t("admin.reservations.days")),1)]),e("div",null,[e("p",ce,t(o.$t("admin.reservations.total")),1),e("p",me,t(s.total_price)+" TND",1)])])])]),_:2},1032,["to"])]))),128)),n(l)>10?(r(),d("div",ue,[e("nav",ge,[e("button",{onClick:a[1]||(a[1]=s=>i.value>1&&i.value--),disabled:i.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," « ",8,ve),e("span",he,t(i.value)+" / "+t(Math.ceil(n(l)/10)),1),e("button",{onClick:a[2]||(a[2]=s=>i.value<Math.ceil(n(l)/10)&&i.value++),disabled:i.value>=Math.ceil(n(l)/10),class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," » ",8,_e)])])):j("",!0)]))])]))}});export{ye as default};
